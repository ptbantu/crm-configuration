# Activiti Spring Boot Dockerfile
# 用于构建包含 Activiti 的 Spring Boot 应用镜像

FROM openjdk:11-jre-slim

# 安装必要的工具
RUN apt-get update && apt-get install -y \
    wget \
    curl \
    && rm -rf /var/lib/apt/lists/*

# 设置工作目录
WORKDIR /app

# 复制应用 JAR 文件（需要先构建 Spring Boot 应用）
# COPY target/activiti-app.jar app.jar

# 或者下载 Activiti 示例应用
# RUN wget https://github.com/Activiti/Activiti/releases/download/activiti-7.0.0/activiti-app.war -O app.war

# 暴露端口
EXPOSE 8080

# 健康检查
HEALTHCHECK --interval=30s --timeout=3s --start-period=60s \
  CMD curl -f http://localhost:8080/actuator/health || exit 1

# 启动命令（需要根据实际应用调整）
# ENTRYPOINT ["java", "-jar", "app.jar"]
# 或者使用 Tomcat 运行 WAR
# ENTRYPOINT ["java", "-jar", "catalina.jar", "run"]

# 注意：此 Dockerfile 需要配合实际的 Spring Boot + Activiti 应用使用
# 建议在 crm-backend 项目中创建 Activiti 模块并构建镜像

